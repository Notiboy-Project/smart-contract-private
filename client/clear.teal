#pragma version 8
txn OnCompletion
int ClearState
==
bnz main_l2
err
main_l2:
gtxn 0 NumAppArgs
int 4
==
gtxn 0 NumApplications
int 1
==
&&
gtxna 0 ApplicationArgs 0
byte "dapp"
==
&&
bnz main_l4
callsub deregisteruser_2
b main_l5
main_l4:
callsub deregisterdapp_1
main_l5:
int 1
return

// dapp_name
dappname_0:
store 0
load 0
len
int 10
>
bnz dappname_0_l2
load 0
b dappname_0_l3
dappname_0_l2:
load 0
extract 0 10
dappname_0_l3:
retsub

// deregister_dapp
deregisterdapp_1:
byte "dappcount"
byte "dappcount"
app_global_get
btoi
int 1
-
itob
app_global_put
txna Applications 1
app_params_get AppCreator
store 3
store 2
gtxn 0 NumAppArgs
int 4
==
gtxn 0 NumApplications
int 1
==
&&
gtxna 0 ApplicationArgs 0
byte "dapp"
==
&&
load 3
&&
load 2
txn Sender
==
&&
assert
gtxna 0 ApplicationArgs 1
callsub dappname_0
store 1
load 1
byte ":"
concat
gtxna 0 ApplicationArgs 2
concat
byte ":"
concat
store 4
load 4
pop
gtxna 0 ApplicationArgs 3
btoi
int 26
*
store 5
byte "notiboy"
load 5
load 4
len
box_extract
load 4
b==
bnz deregisterdapp_1_l2
int 0
return
deregisterdapp_1_l2:
byte "notiboy"
load 5
byte "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
extract 0 26
box_replace
retsub

// deregister_user
deregisteruser_2:
gtxn 0 Sender
box_del
assert
int 1
return